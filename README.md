# Custom Model

![image](https://user-images.githubusercontent.com/35418986/167733406-c9d903d0-067c-4606-8b01-39e6de29bd28.png)

В этом примере мы создаём свою собственную модель, отображающую список строк, и добавляем в неё сортировку. 

1) Есть несколько базовых классов от которых можно унаследоваться для создания модели: `QAbstractListModel` (для списков), `QAbstractTableModel` (для таблиц) 
или `QAbstractItemModel` (для чего-то более сложного, что нельзя сделать с помощью двух предыдущих).
2) Модель имеет пассивную природу. **Она не знает когда и кому потребуются данные, которые она содержит, и только предоставляет интерфейс для доступа к ним.** 
Этот интерфейс выражается в методах `rowCount` и `data`. Их обязательно нужно перегрузить для работы с моделью. Для других базовых классов (абстрактных моделей) могут 
также понадобиться и другие методы (например, `columnCount` для `QAbstractTableModel`).
3) При работе вью с моделью, вью задаёт модели разные вопросы (вызывает методы), например, сколько в ней находится данных, как их выводить, 
какой именно элемент данных класть в определённую ячейку и т.д.
4) Метод `rowCount` отвечает на вопрос "Сколько строк должен вывести вью?".
5) Метод `data` отвечает на вопросы связанные с данными. Строка в этом методе задаётся индексом, а именно `index->row()`. 
Обратите внимание, что мы также делаем проверку `role == Qt::DisplayRole`. _Это гарантирует нам то, что мы отвечаем на вопрос про то какие данные нужно отображать, а 
не, например, как их отображать._ Про другие роли можно почитать [здесь](https://doc.qt.io/qt-5/qt.html#ItemDataRole-enum).
6) Сортировка становится возможной после перегрузки методы `sort` и задания определённых настроек модели ([main.cpp:22](https://github.com/oimp9gr/custom_model/blob/main/main.cpp#L22)). 
Обратите внимание, что в методе `sort` необходимо выбросить сигнал `dataChanged`. Нужно это для того, чтобы вью после сортировки обновил данные, которые мы видим.

Подробнее про создание модели можно почитать например в этом туториале: [ссылка](https://doc.qt.io/qt-5/modelview.html#2-a-simple-model-view-application).
